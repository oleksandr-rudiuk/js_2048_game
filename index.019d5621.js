!function(){var e=document.querySelectorAll(".field-cell"),n=document.getElementsByClassName("message message-start"),t=document.getElementsByClassName("message message-win"),r=document.getElementsByClassName("message message-lose"),a=document.querySelector(".button"),o=document.getElementsByClassName("game-score");function c(){s.forEach(function(n,t){n.forEach(function(n,r){var a=e[4*t+r];a.textContent=n>0?n:"",a.className="field-cell field-cell--".concat(n)})})}var s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=0,i="idle",f=[],u=[],h=2,d=!1;function m(){var e=[],n=0;if(s.forEach(function(r,a){r.forEach(function(r,o){if(0===r){var c={};c.x=a,c.y=o,e.push(c),n++}2048===r&&(i="win",t[0].classList.remove("hidden"),d=!1)})}),0===n&&!1===d&&(i="lose",r[0].classList.remove("hidden")),!0===d){if(g(),e.length<=2){var a=e[0].x,o=e[0].y;s["".concat(a)]["".concat(o)]=h,l+=h}else for(var c=0;c<1;c++)!function(n){var t=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());void 0===e.find(function(e){return e.x===t&&e.y===r})?n--:(s["".concat(t)]["".concat(r)]=h,l+=h),c=n}(c)}return d=!1,s}function v(){for(var e=u.filter(function(e,n){return 0!==e}),n=0;n<e.length;n++)0!==e[n]&&e[n]===e[n+1]?(e[n]=2*e[n],e[n+1]=e[n+2]||0,n+2<e.length&&(e[n+2]=e[n+3]||0),e[e.length-1]=0,f.push(e[n]),d=!0):f.push(e[n]);for(var t=f.length;t<4;t++)f.push(0);if(!1===d){var r=0,a=!0,o=!1,c=void 0;try{for(var s,l=u[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var i=s.value;0===i&&r++,0!==i&&0!==r&&(d=!0)}}catch(e){o=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw c}}}return f}function g(){return 1>=Math.floor(10*Math.random())&&(h=4),h}a.addEventListener("click",function(e){a.innerHTML="Restart",a.className="button restart",n[0].classList.add("hidden"),i="playing",s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=0,function(){g();var e=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());s["".concat(e)]["".concat(n)]=h,l+=h;for(var t=0;t<1;t++){g();var r=Math.floor(4*Math.random()),a=Math.floor(4*Math.random());e===r||n===a?t--:(s["".concat(r)]["".concat(a)]=h,l+=h)}}(),c(s),o[0].innerHTML="".concat(l)}),document.addEventListener("keydown",function(e){if("playing"===i)switch(e.code){case"ArrowLeft":!function(){for(var e=0;e<s.length;e++)u=s[e],v(),s[e]=f,f=[];m(),c(),o[0].innerHTML="".concat(l)}();break;case"ArrowRight":!function(){for(var e=0;e<s.length;e++)u=s[e].reverse(),v(),s[e]=f.reverse(),f=[];m(),c(),o[0].innerHTML="".concat(l)}();break;case"ArrowUp":!function(){for(var e=0;e<s.length;e++)u=[s[0][e],s[1][e],s[2][e],s[3][e]],v(),s[0][e]=f[0],s[1][e]=f[1],s[2][e]=f[2],s[3][e]=f[3],f=[];m(),c(),o[0].innerHTML="".concat(l)}();break;case"ArrowDown":!function(){for(var e=0;e<s.length;e++){var n=[s[0][e],s[1][e],s[2][e],s[3][e]];u=n.reverse(),v(),n=f.reverse(),s[0][e]=n[0],s[1][e]=n[1],s[2][e]=n[2],s[3][e]=n[3],f=[]}m(),c(),o[0].innerHTML="".concat(l)}()}})}();
//# sourceMappingURL=index.019d5621.js.map
